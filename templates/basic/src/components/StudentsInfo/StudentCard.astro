---
import type { UserInfo } from "~/utils/users";
import { getTeams } from "~/utils/users";

export interface Props {
  studentInfo: UserInfo;
}

const { studentInfo } = Astro.props;
const studentTeams = await getTeams(studentInfo);
---

<li
  class="mb-4 block md:mb-7 rounded-xl border-solid border-2 border-secondary dark:border-dark-secondary"
>
  <details class="group">
    <summary
      class="text-base font-semibold py-1.5 px-8 md:py-1 md:px-4 list-none marker:hidden cursor-pointer"
    >
      <h2 class="m-0 p-0 text-xl">
        {studentInfo.name}
        <svg
          class="rotate-0 transition-transform align-middle group-open:rotate-90 rtl:rotate-180 m-0 inline"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 1 16 16"
          width="16"
          height="16"
          aria-hidden="true"
        >
          <path
            class="fill-current"
            fill-rule="evenodd"
            d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"
          ></path>
        </svg>
      </h2>
    </summary>
    <ul class="list-none">
      <li class="">
        <img src={studentInfo.avatarUrl} alt="" />
      </li>
      <li class="text-lg">
        Team
        <a class="font-bold" href={studentTeams[0]?.url} target="_blank">
          {studentTeams[0]?.name}
        </a>
      </li>
      <li class="text-lg">
        <a
          class="font-bold"
          href={studentTeams[0]?.repositoriesUrl}
          target="_blank">Repositories</a
        >
      </li>
      <li class="text-lg">
        <a
          class="font-bold"
          href={`https://github.com/notifications?query=author%3A${studentInfo.login}`}
          target="_blank">Notifications</a
        >
        from {studentInfo.name}
      </li>
      <li class="text-lg">
        <a class="font-bold" href={studentInfo.url} target="_blank"
          >{studentInfo.name} ({studentInfo.login})</a
        >
        at GitHub
      </li>
    </ul>
  </details>
</li>
